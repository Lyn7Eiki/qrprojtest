<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ¿é—´äºŒç»´ç å¡ç‰‡ (å®Œç¾å¤åˆ»ç‰ˆ)</title>
    <style>
        /* ==================== 1. å…¨å±€è®¾ç½® ==================== */
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            background-color: #202020; /* é»‘è‰²èƒŒæ™¯è¡¬æ‰˜é“¶è‰²å¡ç‰‡ */
            font-family: "Microsoft YaHei", "Heiti SC", sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
        }

        /* è½®ç›˜èˆå° */
        .carousel-stage {
            position: relative;
            width: 100%;
            height: 600px;
            transform-style: preserve-3d;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: -20px;
        }

        /* ==================== 2. å¡ç‰‡ç‰©ç†å¤–å½¢ ==================== */
        :root {
            --card-w: 260px;  /* è¿˜åŸæ¯”ä¾‹ */
            --card-h: 363px;
            --spacing: 280px;
        }

        .card {
            width: var(--card-w);
            height: var(--card-h);
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate3d(-50%, -50%, 0);
            
            border-radius: 12px;
            /* æ›´åŠ çœŸå®çš„å¡ç‰‡é˜´å½± */
            box-shadow: 
                0 2px 4px rgba(0,0,0,0.4),
                0 15px 30px rgba(0,0,0,0.5);
            
            cursor: pointer;
            user-select: none;
            transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.4s;
            will-change: transform;
            background: #fff;
        }

        /* ==================== 3. å®Œç¾å¤åˆ»å¡é¢æ ·å¼ ==================== */
        
        /* é“¶è‰²é‡‘å±è¾¹æ¡†å®¹å™¨ */
        .card-face {
            width: 100%;
            height: 100%;
            padding: 10px;
            box-sizing: border-box;
            border-radius: 12px;
            /* æ ¸å¿ƒï¼šæ¨¡æ‹Ÿå›¾ä¸­çš„é“¶è‰²åå…‰æè´¨ */
            background: linear-gradient(135deg, #d8d8d8 0%, #ffffff 30%, #e0e0e0 50%, #c4c4c4 100%);
            border: 1px solid #999;
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: inset 0 0 0 2px rgba(255,255,255,0.5);
        }

        /* å†…éƒ¨é‡‘è‰²/é“¶è‰²ç»†æ¡† */
        .card-inner-border {
            flex: 1;
            border: 2px solid #a8a8a8;
            border-radius: 4px;
            background: rgba(255,255,255,0.3); /* å¾®å¾®é€å‡ºåº•è‰² */
            display: flex;
            flex-direction: column;
            padding: 6px;
            position: relative;
            box-shadow: 0 0 2px rgba(0,0,0,0.2);
        }

        /* --- é¡¶éƒ¨ Header --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 4px;
            padding-bottom: 2px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .header-left {
            position: relative;
        }

        /* å·¦ä¸Šè§’ "æˆ¿é—´" */
        .stage-label {
            font-size: 10px;
            color: #555;
            font-weight: bold;
            position: absolute;
            top: -12px;
            left: 2px;
        }

        /* "ç½‘ç«™ç™»å½•" å¤§å­— */
        .card-name {
            font-size: 20px;
            font-weight: 900;
            color: #111;
            letter-spacing: 0.5px;
            margin-left: 14px; /* è®©å¼€ä½ç½®ç»™ stage-label */
            margin-bottom: -2px;
        }

        /* å³ä¸Šè§’ HP */
        .hp-group {
            font-size: 16px;
            font-weight: 900;
            color: #111;
            display: flex;
            align-items: center;
        }
        .hp-val { font-size: 10px; margin-right: 2px; }
        .type-icon { font-size: 14px; margin-left: 2px; color: #333; }

        /* --- å›¾ç‰‡åŒºåŸŸ (QR Code Art Box) --- */
        .art-box {
            width: 100%;
            height: 140px;
            /* æ ¸å¿ƒï¼šæ¨¡æ‹Ÿå›¾ä¸­çš„æ·±è‰²å…­è¾¹å½¢æ˜Ÿå…‰èƒŒæ™¯ */
            background-color: #001a25;
            background-image: 
                radial-gradient(white 1px, transparent 1px),
                linear-gradient(30deg, #002a3a 12%, transparent 12.5%, transparent 87%, #002a3a 87.5%, #002a3a),
                linear-gradient(150deg, #002a3a 12%, transparent 12.5%, transparent 87%, #002a3a 87.5%, #002a3a),
                linear-gradient(30deg, #002a3a 12%, transparent 12.5%, transparent 87%, #002a3a 87.5%, #002a3a),
                linear-gradient(150deg, #002a3a 12%, transparent 12.5%, transparent 87%, #002a3a 87.5%, #002a3a),
                radial-gradient(circle at center, rgba(78, 205, 196, 0.4), transparent 80%);
            background-size: 
                40px 40px, /* æ˜Ÿæ˜Ÿ */
                20px 35px, 20px 35px, 20px 35px, 20px 35px, /* å…­è¾¹å½¢çº¹ç† */
                100% 100%;
            background-position: 
                0 0, 
                0 0, 0 0, 10px 18px, 10px 18px, 
                0 0;
            
            border: 3px solid #d0d0d0;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            margin-bottom: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        /* äºŒç»´ç ç™½åº•å®¹å™¨ */
        .qr-container {
            background: #fff;
            padding: 4px;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(255,255,255,0.8); /* å‘å…‰æ•ˆæœ */
        }
        
        .qr-container canvas {
            display: block;
        }

        /* å›¾ç‰‡ä¸‹æ–¹çš„ "æˆ¿é—´å·" å°å­— */
        .art-caption {
            position: absolute;
            bottom: 2px;
            font-size: 9px;
            color: #0ff; /* é’è‰²æ–‡å­— */
            text-shadow: 0 0 2px #000;
            font-weight: bold;
            font-family: monospace;
            left: 50%;
            transform: translateX(-50%);
        }

        /* --- æŠ€èƒ½åˆ—è¡¨ (Attacks) --- */
        .attacks {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding-top: 4px;
        }

        .attack-row {
            display: flex;
            flex-direction: column;
        }

        .attack-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* èƒ½é‡å›¾æ ‡å®¹å™¨ */
        .cost-icons {
            display: flex;
            width: 24px;
            justify-content: center;
        }
        /* æ¨¡æ‹Ÿå›¾æ ‡ (æ”¾å¤§é•œ/é—ªç”µ) */
        .icon {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #fff;
            border: 1px solid #333;
            box-shadow: 1px 1px 1px rgba(0,0,0,0.2);
            font-size: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            line-height: 1;
        }

        .attack-name {
            flex: 1;
            font-size: 14px;
            font-weight: 800;
            color: #000;
            text-align: center;
        }

        .damage {
            font-size: 16px;
            font-weight: 900;
            color: #000;
            width: 30px;
            text-align: right;
        }

        .attack-desc {
            font-size: 9px;
            color: #333;
            margin-top: 1px;
            padding-left: 24px; /* å¯¹é½ */
            line-height: 1.2;
            font-weight: 500;
        }

        /* --- åº•éƒ¨ Footer --- */
        .footer-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #888;
            margin-top: auto;
            padding-top: 3px;
            font-size: 9px;
            font-weight: bold;
            color: #000;
        }
        
        .stat-box { display: flex; align-items: center; gap: 2px; }
        
        .copyright {
            font-size: 7px;
            color: #555;
            font-weight: bold;
            margin-top: 2px;
            margin-left: 2px;
        }

        /* ==================== 4. è½®ç›˜çŠ¶æ€é€»è¾‘ ==================== */
        .card[data-pos="0"] { z-index: 100; transform: translate3d(-50%, -50%, 0) scale(1.1); }
        .card[data-pos="1"] { z-index: 90; transform: translate3d(calc(-50% + var(--spacing)), calc(-50% + 25px), 0) rotate(5deg); }
        .card[data-pos="2"] { z-index: 80; transform: translate3d(calc(-50% + var(--spacing)*2), calc(-50% + 70px), 0) rotate(10deg); }
        .card[data-pos="3"] { z-index: 70; transform: translate3d(calc(-50% + var(--spacing)*3), calc(-50% + 140px), 0) rotate(15deg); }
        .card[data-pos="4"] { z-index: 0; transform: translate3d(calc(-50% + var(--spacing)*4), calc(-50% + 140px), 0) rotate(20deg); opacity: 0; pointer-events: none; }
        .card[data-pos="-1"] { z-index: 90; transform: translate3d(calc(-50% - var(--spacing)), calc(-50% + 25px), 0) rotate(-5deg); }
        .card[data-pos="-2"] { z-index: 80; transform: translate3d(calc(-50% - var(--spacing)*2), calc(-50% + 70px), 0) rotate(-10deg); }
        .card[data-pos="-3"] { z-index: 70; transform: translate3d(calc(-50% - var(--spacing)*3), calc(-50% + 140px), 0) rotate(-15deg); }
        .card[data-pos="-4"] { z-index: 0; transform: translate3d(calc(-50% - var(--spacing)*4), calc(-50% + 140px), 0) rotate(-20deg); opacity: 0; pointer-events: none; }

        /* æŒ‰é’® */
        .controls {
            position: absolute;
            bottom: 30px;
            display: flex;
            gap: 40px;
            z-index: 200;
        }
        .btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.5);
            color: #fff;
            padding: 10px 30px;
            border-radius: 30px;
            cursor: pointer;
            backdrop-filter: blur(4px);
            font-weight: bold;
        }
        .btn:hover { background: #fff; color: #000; }

    </style>
</head>
<body>

    <div class="carousel-stage" id="stage"></div>

    <div class="controls">
        <button class="btn" id="prevBtn">PREV</button>
        <button class="btn" id="nextBtn">NEXT</button>
    </div>

    <!-- å†…åµŒ QRCode ç”Ÿæˆåº“ (è½»é‡ç‰ˆ) -->
    <script>
        var QRCodeLib=(function(){var q={};var r=function(t){this.mode=s.MODE_8BIT_BYTE;this.data=t;this.parsedData=[];for(var e=[],i=0,n=this.data.length;n>i;i++){var o=this.data.charCodeAt(i);o>65536?(e[0]=240|(1835008&o)>>>18,e[1]=128|(258048&o)>>>12,e[2]=128|(4032&o)>>>6,e[3]=128|63&o):o>2048?(e[0]=224|(61440&o)>>>12,e[1]=128|(4032&o)>>>6,e[2]=128|63&o):o>128?(e[0]=192|(1984&o)>>>6,e[1]=128|63&o):e[0]=o;this.parsedData=this.parsedData.concat(e)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))};var u=function(t,e){this.typeNumber=t;this.errorCorrectLevel=e;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]};var v=function(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=new Array(t.length-i+e);for(var n=0;n<t.length-i;n++)this.num[n]=t[n+i]};var w=function(t,e){this.totalCount=t;this.dataCount=e};var x=function(){this.buffer=[];this.length=0};var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};var y={L:1,M:0,Q:3,H:2};var z={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var A={glog:function(t){if(1>t)throw new Error("glog("+t+")");return A.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return A.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var B=0;8>B;B++)A.EXP_TABLE[B]=1<<B;for(var B=8;256>B;B++)A.EXP_TABLE[B]=A.EXP_TABLE[B-4]^A.EXP_TABLE[B-5]^A.EXP_TABLE[B-6]^A.EXP_TABLE[B-8];for(var B=0;255>B;B++)A.LOG_TABLE[A.EXP_TABLE[B]]=B;r.prototype={getLength:function(t){var e=this.mode,i=t;if(1<=i&&10>i)switch(e){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw new Error("mode:"+e)}else if(27>i)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw new Error("mode:"+e)}else if(41>i)switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+i)},write:function(t){for(var e=0,i=this.data.length;i>e;e++)t.put(this.parsedData[e],8)}};u.prototype={addData:function(t){var e=new r(t);this.dataList.push(e);this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){var t=0;for(t=0;t<this.dataList.length;t++){var e=this.dataList[t];e.getLength(this.typeNumber)}for(var i=0;i<40;i++){t=0;for(var n=0;n<this.dataList.length;n++)e=this.dataList[n],t+=e.getLength(i+1);if(t<=w.getRSBlocks(i+1,this.errorCorrectLevel))break}this.typeNumber=i+1}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17;this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[i][n]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(t,e);this.typeNumber>=7&&this.setupTypeNumber(t);null==this.dataCache&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var i=-1;7>=i;i++)if(!(-1>=t+i||this.moduleCount<=t+i||-1>=e+i||this.moduleCount<=e+i))for(var n=-1;7>=n;n++)-1>=t+n||this.moduleCount<=t+n||-1>=e+n||this.moduleCount<=e+n||(this.modules[t+i][e+n]=0<=i&&6>=i&&(0==n||6==n)||0<=n&&6>=n&&(0==i||6==i)||2<=i&&4>=i&&2<=n&&4>=n?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,i=0;8>i;i++){this.makeImpl(!0,i);var n=C.getLostPoint(this);(0==i||t>n)&&(t=n,e=i)}return e},createImgTag:function(t,e){t=t||2;e=e||0;var i=this.moduleCount*t+2*e;return'<img src="'+this.createDataURL(t,e)+'" width="'+i+'" height="'+i+'"/>'},createDataURL:function(t,e){t=t||2;e=e||0;var i=this.moduleCount*t+2*e,n=e,o=e,r=document.createElement("canvas");r.width=i;r.height=i;var a=r.getContext("2d");a.fillStyle="#FFFFFF";a.fillRect(0,0,i,i);a.fillStyle="#000000";for(var s=0;s<this.modules.length;s++)for(var h=0;h<this.modules[s].length;h++)this.modules[s][h]&&a.fillRect(t*h+n,t*s+o,t,t);return r.toDataURL("image/png")},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2),null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=C.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var i=0;i<t.length;i++){var n=t[e],o=t[i];if(null==this.modules[n][o])for(var r=-2;2>=r;r++)for(var a=-2;2>=a;a++)this.modules[n+r][o+a]=-2==r||2==r||-2==a||2==a||0==r&&0==a?!0:!1}},setupTypeNumber:function(t){for(var e=C.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var n=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=n}for(var i=0;18>i;i++){var n=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=n}},setupTypeInfo:function(t,e){for(var i=this.errorCorrectLevel<<3|e,n=C.getBCHTypeInfo(i),o=0;15>o;o++){var r=!t&&1==(n>>o&1);6>o?this.modules[o][8]=r:8>o?this.modules[o+1][8]=r:this.modules[this.moduleCount-15+o][8]=r}for(var o=0;15>o;o++){var r=!t&&1==(n>>o&1);8>o?this.modules[8][this.moduleCount-o-1]=r:9>o?this.modules[8][15-o-1+1]=r:this.modules[8][15-o-1]=r}},mapData:function(t,e){for(var i=-1,n=this.moduleCount-1,o=7,r=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[n][a-s]){var h=!1;r<t.length&&(h=1==(t[r]>>>o&1));var l=C.getMask(e,n,a-s);l&&(h=!h),this.modules[n][a-s]=h,o--,-1==o&&(r++,o=7)}if(n+=i,0>n||this.moduleCount<=n){n-=i,i=-i;break}}}};u.createData=function(t,e,i){for(var n=w.getRSBlocks(t,e),o=new x,r=0;r<i.length;r++){var a=i[r];o.put(a.mode,4);o.put(a.getLength(t),a.getLengthInBits(t));a.write(o)}for(var s=0,t=0;t<n.length;t++)s+=n[t].dataCount;if(o.length>8*s)throw new Error("code length overflow. ("+o.length+">"+8*s+")");for(o.length+4<=8*s&&o.put(0,4);0!=o.length%8;)o.putBit(!1);for(;;){if(o.length>=8*s)break;o.put(236,8);if(o.length>=8*s)break;o.put(17,8)}return u.createBytes(o,n)};u.createBytes=function(t,e){for(var i=0,n=0,o=0,r=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var h=e[s].dataCount,l=e[s].totalCount-h;n=Math.max(n,h);o=Math.max(o,l);r[s]=new Array(h);for(var u=0;h>u;u++)r[s][u]=255&t.buffer[u+i];i+=h;var c=a.getErrorCorrectPolynomial(l),d=new v(r[s],c.getLength()-1),f=d.mod(c);a[s]=new Array(c.getLength()-1);for(var u=0;u<a[s].length;u++){var p=u+f.getLength()-a[s].length;a[s][u]=p>=0?f.get(p):0}}for(var g=0,u=0;u<e.length;u++)g+=e[u].totalCount;for(var m=new Array(g),_=0,u=0;n>u;u++)for(var s=0;s<e.length;s++)u<r[s].length&&(m[_++]=r[s][u]);for(var u=0;o>u;u++)for(var s=0;s<e.length;s++)u<a[s].length&&(m[_++]=a[s][u]);return m};var C={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;C.getBCHDigit(e)-C.getBCHDigit(C.G15)>=0;)e^=C.G15<<C.getBCHDigit(e)-C.getBCHDigit(C.G15);return(t<<10|e)^C.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;C.getBCHDigit(e)-C.getBCHDigit(C.G18)>=0;)e^=C.G18<<C.getBCHDigit(e)-C.getBCHDigit(C.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return C.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,i){switch(t){case z.PATTERN000:return 0==(e+i)%2;case z.PATTERN001:return 0==e%2;case z.PATTERN010:return 0==i%3;case z.PATTERN011:return 0==(e+i)%3;case z.PATTERN100:return 0==(Math.floor(e/2)+Math.floor(i/3))%2;case z.PATTERN101:return 0==e*i%2+e*i%3;case z.PATTERN110:return 0==(e*i%2+e*i%3)%2;case z.PATTERN111:return 0==(e*i%3+(e+i)%2)%2}throw new Error("bad maskPattern:"+t)},getErrorCorrectPolynomial:function(t){for(var e=new v([1],0),i=0;t>i;i++)e=e.multiply(new v([1,A.gexp(i)],0));return e},getLostPoint:function(t){for(var e=t.getModuleCount(),i=0,n=0;e>n;n++)for(var o=0;e>o;o++){for(var r=0,a=t.isDark(n,o),s=-1;1>=s;s++)if(!(0>n+s||e<=n+s))for(var h=-1;1>=h;h++)0>o+h||e<=o+h||(0!=s||0!=h)&&a==t.isDark(n+s,o+h)&&r++;r>5&&(i+=3+r-5)}for(var n=0;e-1>n;n++)for(var o=0;e-1>o;o++){var l=0;t.isDark(n,o)&&l++,t.isDark(n+1,o)&&l++,t.isDark(n,o+1)&&l++,t.isDark(n+1,o+1)&&l++,(0==l||4==l)&&(i+=3)}for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(i+=40);for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(i+=40);for(var u=0,o=0;e>o;o++)for(var n=0;e>n;n++)t.isDark(n,o)&&u++;var c=Math.abs(100*u/e/e-50)/5;return i+=10*c}};v.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<t.getLength();n++)e[i+n]^=A.glog(A.glog(this.get(i))+A.glog(t.get(n)));return new v(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=A.glog(this.get(0))-A.glog(t.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(var n=0;n<t.getLength();n++)i[n]^=A.gexp(A.glog(t.get(n))+e);return new v(i,0).mod(t)}};w.getRSBlocks=function(t,e){var i=w.getRsBlockTable(t,e);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=i.length/3,o=[],r=0;n>r;r++)for(var a=i[3*r+0],s=i[3*r+1],h=i[3*r+2],l=0;a>l;l++)o.push(new w(s,h));return o};w.getRsBlockTable=function(t,e){switch(e){case y.L:return w.RS_BLOCK_TABLE[4*(t-1)+0];case y.M:return w.RS_BLOCK_TABLE[4*(t-1)+1];case y.Q:return w.RS_BLOCK_TABLE[4*(t-1)+2];case y.H:return w.RS_BLOCK_TABLE[4*(t-1)+3]}return void 0};x.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;e>i;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};w.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]];return{QRCode:u,QRErrorCorrectLevel:y}})();
    </script>

    <script>
        const TOTAL_CARDS = 14; 
        let activeIndex = 0;
        const stage = document.getElementById('stage');

        // ç”Ÿæˆå•å¼ å¡ç‰‡çš„ HTML
        function createCardHTML(index) {
            const roomNum = 1001 + index;
            // å®Œç¾å¤åˆ»çš„ HTML ç»“æ„
            return `
            <div class="card-face">
                <div class="card-inner-border">
                    <!-- é¡¶éƒ¨ -->
                    <div class="header">
                        <div class="header-left">
                            <span class="stage-label">æˆ¿é—´</span>
                            <span class="card-name">ç½‘ç«™ç™»å½•</span>
                        </div>
                        <div class="hp-group">
                            <span class="hp-val">HP</span>100<span class="type-icon">â˜…</span>
                        </div>
                    </div>

                    <!-- äºŒç»´ç ç‰¹æ•ˆåŒºåŸŸ -->
                    <div class="art-box">
                        <div class="qr-container" id="qr-target-${index}">
                            <!-- äºŒç»´ç å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                        </div>
                        <div class="art-caption">æˆ¿é—´å· ${roomNum}</div>
                    </div>

                    <!-- æŠ€èƒ½åˆ—è¡¨ -->
                    <div class="attacks">
                        <!-- æŠ€èƒ½ 1 -->
                        <div class="attack-row">
                            <div class="attack-header">
                                <div class="cost-icons">
                                    <div class="icon">ğŸ”</div>
                                </div>
                                <span class="attack-name">æ‰«æè®¿é—®</span>
                                <span class="damage">20+</span>
                            </div>
                            <p class="attack-desc">ç”¨æ™ºèƒ½æ‰‹æœºæˆ–å…¼å®¹è®¾å¤‡æ‰«ææ­¤äºŒç»´ç ã€‚</p>
                        </div>
                        
                        <!-- æŠ€èƒ½ 2 -->
                        <div class="attack-row">
                            <div class="attack-header">
                                <div class="cost-icons">
                                    <div class="icon">âš¡</div>
                                </div>
                                <span class="attack-name">å®‰å…¨æ•°æ®ä¼ è¾“</span>
                                <span class="damage">50+</span>
                            </div>
                            <p class="attack-desc">ä¸ºæ•°æ®äº¤æ¢ä¼ è¾“åŠ å¯†ä¿¡æ¯ã€‚</p>
                        </div>
                    </div>

                    <!-- åº•éƒ¨ -->
                    <div class="footer-stats">
                        <div class="stat-box">å¼±ç‚¹ <span style="font-size:12px">ğŸŒ‘</span>Ã—2</div>
                        <div class="stat-box">æŠµæŠ—åŠ›</div>
                        <div class="stat-box">æ’¤é€€ <span style="font-size:12px">âšª</span></div>
                    </div>
                    <div class="copyright">Â©hisashiki</div>
                </div>
            </div>`;
        }

        // åˆå§‹åŒ–
        function init() {
            const fragment = document.createDocumentFragment();
            for (let i = 0; i < TOTAL_CARDS; i++) {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.lastPos = 0;
                card.setAttribute('data-pos', 'hidden');
                card.innerHTML = createCardHTML(i);
                
                // ç‚¹å‡»äº¤äº’
                card.onclick = () => {
                    const diff = getShortestPath(activeIndex, i, TOTAL_CARDS);
                    if (diff !== 0) {
                        activeIndex = (activeIndex + diff + TOTAL_CARDS) % TOTAL_CARDS;
                        updateCarousel();
                    }
                };
                
                fragment.appendChild(card);
            }
            stage.appendChild(fragment);

            // æ¸²æŸ“äºŒç»´ç 
            setTimeout(() => {
                for (let i = 0; i < TOTAL_CARDS; i++) {
                    const roomNumber = "Room " + (1001 + i);
                    const target = document.getElementById(`qr-target-${i}`);
                    try {
                        const qr = new QRCodeLib.QRCode(3, QRCodeLib.QRErrorCorrectLevel.L);
                        qr.addData(roomNumber);
                        qr.make();
                        target.innerHTML = qr.createImgTag(3, 0); // 3px per module
                    } catch(e) { console.error(e); }
                }
            }, 50);

            requestAnimationFrame(updateCarousel);
        }

        function updateCarousel() {
            const cards = Array.from(stage.children);
            cards.forEach((card, i) => {
                let diff = getShortestPath(activeIndex, i, TOTAL_CARDS);
                let targetPos = diff;
                if (diff > 4) targetPos = 4;
                if (diff < -4) targetPos = -4;

                const lastPos = parseInt(card.dataset.lastPos || 0);
                const isWrapping = Math.abs(targetPos - lastPos) > 4;

                if (isWrapping) {
                    card.style.transition = 'none';
                    card.setAttribute('data-pos', targetPos);
                    void card.offsetHeight;
                    requestAnimationFrame(() => card.style.transition = '');
                } else {
                    card.setAttribute('data-pos', targetPos);
                }
                card.dataset.lastPos = targetPos;
            });
        }

        function getShortestPath(from, to, len) {
            let diff = to - from;
            if (diff > len / 2) diff -= len;
            if (diff < -len / 2) diff += len;
            return diff;
        }

        const next = () => { activeIndex = (activeIndex + 1) % TOTAL_CARDS; updateCarousel(); };
        const prev = () => { activeIndex = (activeIndex - 1 + TOTAL_CARDS) % TOTAL_CARDS; updateCarousel(); };
        document.getElementById('nextBtn').onclick = next;
        document.getElementById('prevBtn').onclick = prev;
        document.addEventListener('keydown', e => {
            if(e.key === 'ArrowRight') next();
            if(e.key === 'ArrowLeft') prev();
        });

        init();
    </script>
</body>
</html>